import streamlit as st
import pandas as pd
import datetime

st.title("å¤§æ¨¡å‹å­¦ä¹ éœ€æ±‚è°ƒæŸ¥é—®å·")

st.markdown("è¯·è®¤çœŸå¡«å†™ä»¥ä¸‹é—®é¢˜ï¼Œå¸®åŠ©æˆ‘ä»¬æ›´å¥½äº†è§£å­¦ä¹ éœ€æ±‚ã€‚")

q1_city = st.text_input("Q1: æ‚¨ç°åœ¨åœ¨å“ªä¸ªåŸå¸‚ï¼Œæ˜¯å¦åœ¨èŒï¼Œæ‰€ä»äº‹çš„å·¥ä½œæ˜¯ä»€ä¹ˆï¼Ÿ")
q2_knowledge = st.text_area("Q2: å¯¹å¤§æ¨¡å‹æœ‰å¤šå°‘è®¤çŸ¥ï¼Œäº†è§£å¤šå°‘åŸç†ä¸æŠ€æœ¯ç‚¹ï¼Ÿ")
q3_need = st.text_area("Q3: å­¦ä¹ å¤§æ¨¡å‹çš„æœ€æ ¸å¿ƒéœ€æ±‚æ˜¯ä»€ä¹ˆï¼Ÿ")
q4_code = st.selectbox(
    "Q4: æ˜¯å¦æœ‰ Python ç¼–ç¨‹åŸºç¡€æˆ–å…¶ä»–ç¼–ç¨‹ç»éªŒï¼Ÿ",
    ["æ²¡æœ‰ç¼–ç¨‹ç»éªŒ", "ç•¥æœ‰äº†è§£", "æœ‰ä¸€å®šåŸºç¡€ï¼Œå†™è¿‡ä¸€äº›ä»£ç ", "ç†Ÿç»ƒæŒæ¡"]
)
q5_time = st.text_input("Q5: æ¯å¤©èƒ½èŠ±å¤šå°‘æ—¶é—´ç”¨äºå­¦ä¹ ï¼Œå¤§è‡´ç©ºé—²æ—¶é—´ç‚¹å¤„äºä»€ä¹ˆæ—¶æ®µï¼Ÿ")
q6_other = st.text_area("Q6: é™¤ä»¥ä¸Šäº”ç‚¹å¤–æ˜¯å¦è¿˜æœ‰å…¶ä»–é—®é¢˜æƒ³è¦è¡¥å……ï¼Ÿ")

submitted = st.button("ç”ŸæˆæŠ¥å‘Š")

if submitted:
    data = {
        "åŸå¸‚ä¸èŒä¸š": [q1_city],
        "å¤§æ¨¡å‹è®¤çŸ¥": [q2_knowledge],
        "æ ¸å¿ƒå­¦ä¹ éœ€æ±‚": [q3_need],
        "ç¼–ç¨‹åŸºç¡€": [q4_code],
        "å­¦ä¹ æ—¶é—´ä¸æ—¶æ®µ": [q5_time],
        "å…¶ä»–è¡¥å……": [q6_other],
        "æäº¤æ—¶é—´": [datetime.datetime.now().strftime("%Y-%m-%d %H:%M:%S")]
    }

    df = pd.DataFrame(data)
    csv = df.to_csv(index=False).encode("utf-8-sig")

    st.success("é—®å·å·²ç”Ÿæˆï¼è¯·ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®ä¸‹è½½é—®å·æ•°æ®ï¼š")
    st.download_button(
        label="ğŸ“¥ ä¸‹è½½ CSV æŠ¥å‘Š",
        data=csv,
        file_name="å¤§æ¨¡å‹å­¦ä¹ éœ€æ±‚è°ƒæŸ¥é—®å·.csv",
        mime="text/csv"
    )
